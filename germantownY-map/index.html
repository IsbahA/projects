<!DOCTYPE html>
<html>

<head>
    <title>Leaflet Mapping Tutorial</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!--to avoid unwanted scaling-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <style>
        body {
            padding: 0;
            margin: 0;
        }

        html,
        body,
        #map {
            height: 100%;
            width: 100%;
        }

        .descrip {
            width: 250px;
            font-size: 16px;
            font-family: "Open Sans", Helvetica, sans-serif;
            padding: 10px 14px;
            background-color: #FFFFFF;
            border-radius: 5px;
            border: 5px solid #D3D3D3;
            display: none;
            position: absolute;
            bottom: 10px;
            left: 10px;
        }

        .descrip.visible {
            display: block;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        //toDo: add an alt title to each marker
        //toDo: add markers for other important buildings
        //toDO: make the description box diappear sfter hovering over it (fix whatever is going on heres)
        //toDO: add an image overlay using Phialdelphia land map of 1942
        //toDo: get the actual map (waiting on that still)
        //toDo: 
        var map = L.map("map", { center: [40.035019627871186, -75.17804787523784], zoom: 16
        });

        //New tile layer for google satellite map
        var googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
        maxZoom: 20,
        subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(map);


        var googleStreets = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
        maxZoom: 20,
        subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(map);

        var theY = L.marker([40.03688676164644, -75.17651294384324], { alt: 'The location of the YWCA' })
            .bindPopup('<h1>The Germantown YWCA</h1><p>This is the location of the now abandoned YWCA building, this was once a community center and social service agency. The first to integrate in Philadelphia, it once served as a vital hub for civil rights.</p>')
            .addTo(map);
        var vernonPark = L.marker([40.03542785276433, -75.17695293774428], { alt: 'Vernon Park' })
            .bindPopup('<h1>Vernon Park</h1>')
            .addTo(map);
        var CIP = L.marker([40.03695238316871, -75.17577428191765], { alt: 'Center in the Park' })
            .bindPopup('<h1>Center in the Park</h1><p>A senior center that sits behind the YWCA building.</p>')
            .addTo(map);
        var freeLibrary = L.marker([40.035737424335885, -75.17649129541964], { alt: 'The Germantown Branch of the free library' })
            .bindPopup('<h1>The Free Library</h1><p></p>')
            .addTo(map);
        var germantownTownHall = L.marker([40.03801908329352, -75.17783074384282], { alt: 'The Germantown Town Hall' })
            .bindPopup('<h1>The Germantown Town Hall</h1><p></p>')
            .addTo(map);

        var germantownBoundary = L.polyline([[40.0459162067792, -75.18222981253187], [40.04547445973449, -75.18203539554251], [40.04478053640238, -75.18168976740164], [40.043430819159575, -75.18103053250151], [40.03497442446138, -75.17372136089996], [40.02897699564336, -75.16330482224477], [40.02388794530976, -75.15978642735094], [40.022348325903785, -75.1616852435925], [40.01961113884869, -75.16336066968802], [40.01751540587145, -75.17201703778757], [40.035219178995106, -75.1929296105513], [40.0459162067792, -75.18222981253187]]).addTo(map);
        var plateSevenA2 = L.polyline([[40.04292061229805, -75.1444113316615], [40.02958372094942, -75.1473275070273], [40.033372192275934, -75.17674113777126], [40.04802395597832, -75.17177575156772],[40.04292061229805, -75.1444113316615]]).addTo(map);
        var plateSevenA1 = L.polyline([[40.04675364524721, -75.17733123476171], [40.03274155332281, -75.18048812127061], [40.03621361652963, -75.2073908242032], [40.050865171507226, -75.2030395194172],[40.04675364524721, -75.17733123476171]]).addTo(map);
        var plateSixA3 =L.polyline([[40.04675364524721, -75.17733123476171], [40.03274155332281, -75.18048812127061], [40.03621361652963, -75.2073908242032], [40.050865171507226, -75.2030395194172],[40.04675364524721, -75.17733123476171]]).addTo(map);
        var plateSixA4 = L.polyline([[40.04675364524721, -75.17733123476171], [40.03274155332281, -75.18048812127061], [40.03621361652963, -75.2073908242032], [40.050865171507226, -75.2030395194172],[40.04675364524721, -75.17733123476171]]).addTo(map);
        var descrip = L.control({ position: 'bottomleft' });
        descrip.onAdd = function () {
            let div = L.DomUtil.create('div', 'descrip');
            div.innerHTML =
                '<h1>About this Map</h1><hr>' +
                '<p>This map displays the location of the Germantown YWCA building</p>' +
                '<p> and other landmarks closeby that are significant to the historic building.</p>' +
                '<h2>How to Use</h2>' +
                '<p>Click on a marker to learn more about a landmark.</p>';
            return div;
        };

        descrip.addTo(map);
        // Get the description box element
        var descriptionBox = document.querySelector('.descrip');

        // Show description box on map load
        descriptionBox.classList.add('visible');

        // Function to hide the description box
        function hideDescriptionBox() {
            descriptionBox.classList.remove('visible');
        }

        // Function to show the description box
        function showDescriptionBox() {
            descriptionBox.classList.add('visible');
        }

        // Set a timeout to hide the description box after 7 seconds
        setTimeout(hideDescriptionBox, 7000); // Hide after 7 seconds

        // Hide the description box on mouseleave
        descriptionBox.addEventListener('mouseleave', hideDescriptionBox);

        // Show the description box on mouseenter
       descriptionBox.addEventListener('mouseenter', showDescriptionBox);

        // Add layer control
        var baseLayers = {
            "Satellite": googleSat,
            "Streets": googleStreets
            
        };

        var overlayLayers = {
            "Germantown Boundary": germantownBoundary,
            
            "Map 7A-1": plateSevenA1,
            "Map 7A-2": plateSevenA2,
            "Map 6A-3": plateSixA3,
            "Map 6A-4": plateSixA4
        };

        L.control.layers(baseLayers, overlayLayers).addTo(map);


    </script>
</body>

</html>
